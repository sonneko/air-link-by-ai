(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3530:(e,t,a)=>{Promise.resolve().then(a.bind(a,3869))},3869:(e,t,a)=>{"use strict";a.d(t,{default:()=>ee});var s=a(5155),n=a(2115),r=a(7481),i=a(9959);let l=e=>{let t=i.Ay.deflate(e);return btoa(String.fromCharCode.apply(null,Array.from(t))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},o=e=>{try{let t=e.replace(/-/g,"+").replace(/_/g,"/");for(;t.length%4;)t+="=";let a=atob(t).split("").map(e=>e.charCodeAt(0)),s=new Uint8Array(a);return i.Ay.inflate(s,{to:"string"})}catch(t){return e}},c=e=>{try{JSON.parse(e)}catch(e){return!1}return!0},d={iceServers:[{urls:["stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302"]}],iceCandidatePoolSize:10};var u=a(4253),f=a(2085),x=a(9434);let m=(0,f.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),p=n.forwardRef((e,t)=>{let{className:a,variant:n,size:r,asChild:i=!1,...l}=e,o=i?u.DX:"button";return(0,s.jsx)(o,{className:(0,x.cn)(m({variant:n,size:r,className:a})),ref:t,...l})});p.displayName="Button";let h=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,x.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...n})});h.displayName="Card";let g=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,x.cn)("flex flex-col space-y-1.5 p-6",a),...n})});g.displayName="CardHeader";let j=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,x.cn)("text-2xl font-semibold leading-none tracking-tight",a),...n})});j.displayName="CardTitle";let v=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,x.cn)("text-sm text-muted-foreground",a),...n})});v.displayName="CardDescription";let b=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,x.cn)("p-6 pt-0",a),...n})});b.displayName="CardContent";let N=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,x.cn)("flex items-center p-6 pt-0",a),...n})});N.displayName="CardFooter";var y=a(4063),w=a(6318),C=a(9347);function S(e){let{onCreateSession:t,onJoin:a,onScan:n}=e;return(0,s.jsxs)(h,{children:[(0,s.jsx)(g,{children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-3 rounded-lg bg-primary/20 text-primary",children:(0,s.jsx)(y.A,{className:"w-8 h-8"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(j,{className:"text-2xl font-bold",children:"AirLink"}),(0,s.jsx)(v,{children:"Ad-hoc, direct & private chat."})]})]})}),(0,s.jsxs)(b,{className:"space-y-6",children:[(0,s.jsxs)(p,{onClick:t,className:"w-full",size:"lg",children:[(0,s.jsx)(w.A,{className:"mr-2 h-5 w-5"})," Create New Chat"]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"flex-1 h-px bg-border"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"OR"}),(0,s.jsx)("div",{className:"flex-1 h-px bg-border"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(p,{onClick:a,variant:"secondary",className:"w-full",children:"Join Chat"}),(0,s.jsx)(p,{onClick:n,variant:"outline",size:"icon","aria-label":"Scan QR Code",children:(0,s.jsx)(C.A,{})})]})]})]})}let A=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("textarea",{className:(0,x.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});A.displayName="Textarea";var k=a(1857),R=a(5599),T=a(172),I=a(7003),E=a(5318);let O=I.bL,D=I.l9,_=I.ZL;I.bm;let M=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(I.hJ,{ref:t,className:(0,x.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...n})});M.displayName=I.hJ.displayName;let L=n.forwardRef((e,t)=>{let{className:a,children:n,...r}=e;return(0,s.jsxs)(_,{children:[(0,s.jsx)(M,{}),(0,s.jsxs)(I.UC,{ref:t,className:(0,x.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r,children:[n,(0,s.jsxs)(I.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(E.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});L.displayName=I.UC.displayName;let z=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,x.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};z.displayName="DialogHeader";let P=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(I.hE,{ref:t,className:(0,x.cn)("text-lg font-semibold leading-none tracking-tight",a),...n})});P.displayName=I.hE.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(I.VY,{ref:t,className:(0,x.cn)("text-sm text-muted-foreground",a),...n})}).displayName=I.VY.displayName;var J=a(2352);function V(e){let{offer:t,pastedInfo:a,setPastedInfo:i,onCompleteJoin:l,onCancel:o}=e,{toast:c}=(0,r.dj)(),[d,u]=(0,n.useState)(!1),f=e=>{navigator.clipboard.writeText(e),c({title:"Copied!",description:"Session info copied to clipboard."})};return(0,s.jsxs)(h,{children:[(0,s.jsxs)(g,{children:[(0,s.jsx)(j,{children:"Create Chat Session"}),(0,s.jsx)(v,{children:t?"Have your friend scan this QR code or copy the text below.":"Generating session info..."})]}),(0,s.jsx)(b,{className:"space-y-4",children:t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"bg-white p-4 rounded-lg flex justify-center",children:(0,s.jsx)(k.Ay,{value:t,size:256})}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(A,{value:t,readOnly:!0,className:"h-24 text-xs font-mono"}),(0,s.jsx)(p,{onClick:()=>f(t),variant:"ghost",size:"icon",className:"absolute right-2 top-2 text-muted-foreground hover:text-foreground",children:(0,s.jsx)(R.A,{className:"h-5 w-5"})})]}),(0,s.jsx)(v,{children:"After your friend joins, they will send you back their session info. Scan or paste it below."}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(A,{value:a,onChange:e=>i(e.target.value),placeholder:"Paste or scan friend's session info",className:"h-24 text-xs font-mono"}),(0,s.jsxs)(O,{open:d,onOpenChange:u,children:[(0,s.jsx)(D,{asChild:!0,children:(0,s.jsx)(p,{variant:"outline",size:"icon","aria-label":"Scan QR Code",children:(0,s.jsx)(C.A,{})})}),(0,s.jsxs)(L,{children:[(0,s.jsx)(z,{children:(0,s.jsx)(P,{children:"Scan Friend's QR Code"})}),(0,s.jsx)(J.Lp,{onScan:e=>{e&&e.length>0&&e[0].rawValue&&(i(e[0].rawValue),u(!1))},onError:e=>console.log(null==e?void 0:e.message)})]})]})]}),(0,s.jsx)(p,{onClick:l,disabled:!a,className:"w-full",children:"Connect"})]}):(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-muted-foreground pt-4",children:[(0,s.jsx)(T.A,{className:"animate-spin h-5 w-5"}),(0,s.jsx)("span",{children:"Generating session..."})]})}),(0,s.jsx)(N,{className:"flex-col gap-2",children:(0,s.jsx)(p,{variant:"outline",onClick:o,className:"w-full",children:"Cancel"})})]})}var Q=a(2543);function F(e){let{answer:t,pastedInfo:a,setPastedInfo:n,onJoin:i,connectionStatus:l,onBack:o}=e,{toast:c}=(0,r.dj)(),d=e=>{navigator.clipboard.writeText(e),c({title:"Copied!",description:"Session info copied to clipboard."})};return(0,s.jsxs)(h,{children:[(0,s.jsxs)(g,{children:[(0,s.jsx)(j,{children:"Join Chat Session"}),t?(0,s.jsx)(v,{children:"Connection ready. Have your friend scan this QR code or copy the info to send back."}):(0,s.jsx)(v,{children:"Paste or scan the session info from your friend below."})]}),(0,s.jsxs)(b,{className:"space-y-4",children:[t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"bg-white p-4 rounded-lg flex justify-center",children:(0,s.jsx)(k.Ay,{value:t,size:256})}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(A,{value:t,readOnly:!0,className:"h-24 text-xs font-mono"}),(0,s.jsx)(p,{onClick:()=>d(t),variant:"ghost",size:"icon",className:"absolute right-2 top-2 text-muted-foreground hover:text-foreground",children:(0,s.jsx)(R.A,{className:"h-5 w-5"})})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(A,{value:a,onChange:e=>n(e.target.value),placeholder:"Paste friend's session info here",className:"h-32 text-xs font-mono"}),(0,s.jsx)(p,{onClick:i,disabled:!a,className:"w-full",children:"Generate Your Info"})]}),"connecting"===l&&!t&&(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-muted-foreground pt-4",children:[(0,s.jsx)(T.A,{className:"animate-spin h-5 w-5"}),(0,s.jsx)("span",{children:"Generating your connection details..."})]}),"connecting"===l&&t&&(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-muted-foreground pt-4",children:[(0,s.jsx)(T.A,{className:"animate-spin h-5 w-5"}),(0,s.jsx)("span",{children:"Waiting for friend to connect..."})]})]}),(0,s.jsx)(N,{children:(0,s.jsxs)(p,{variant:"outline",onClick:o,className:"w-full",children:[(0,s.jsx)(Q.A,{className:"mr-2 h-4 w-4"})," Back"]})})]})}let G=n.forwardRef((e,t)=>{let{className:a,type:n,...r}=e;return(0,s.jsx)("input",{type:n,className:(0,x.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...r})});G.displayName="Input";let B=(0,f.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function H(e){let{className:t,variant:a,...n}=e;return(0,s.jsx)("div",{className:(0,x.cn)(B({variant:a}),t),...n})}var U=a(4439);let Y=n.forwardRef((e,t)=>{let{className:a,children:n,...r}=e;return(0,s.jsxs)(U.bL,{ref:t,className:(0,x.cn)("relative overflow-hidden",a),...r,children:[(0,s.jsx)(U.LM,{className:"h-full w-full rounded-[inherit]",children:n}),(0,s.jsx)(X,{}),(0,s.jsx)(U.OK,{})]})});Y.displayName=U.bL.displayName;let X=n.forwardRef((e,t)=>{let{className:a,orientation:n="vertical",...r}=e;return(0,s.jsx)(U.VM,{ref:t,orientation:n,className:(0,x.cn)("flex touch-none select-none transition-colors","vertical"===n&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===n&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...r,children:(0,s.jsx)(U.lr,{className:"relative flex-1 rounded-full bg-border"})})});X.displayName=U.VM.displayName;var $=a(8127),q=a(4371),K=a(3672);function W(e){let{messages:t,connectionStatus:a,onSendMessage:r}=e,[i,l]=(0,n.useState)(""),o=(0,n.useRef)(null);(0,n.useEffect)(()=>{if(o.current){let e=o.current.querySelector("div[data-radix-scroll-area-viewport]");e&&(e.scrollTop=e.scrollHeight)}},[t]);let c=()=>{l(r(i))};return(0,s.jsxs)(h,{className:"flex flex-col h-[80vh] w-full max-h-[700px]",children:[(0,s.jsxs)(g,{className:"flex flex-row items-center justify-between border-b",children:[(0,s.jsx)(j,{children:"Chat"}),(()=>{switch(a){case"connected":return(0,s.jsxs)(H,{variant:"default",className:"bg-accent text-accent-foreground",children:[(0,s.jsx)($.A,{className:"mr-1 h-3 w-3"})," Connected"]});case"connecting":return(0,s.jsxs)(H,{variant:"secondary",children:[(0,s.jsx)(T.A,{className:"mr-1 h-3 w-3 animate-spin"})," Connecting"]});case"failed":return(0,s.jsxs)(H,{variant:"destructive",children:[(0,s.jsx)(q.A,{className:"mr-1 h-3 w-3"})," Failed"]});default:return(0,s.jsx)(H,{variant:"outline",children:"Disconnected"})}})()]}),(0,s.jsx)(b,{className:"flex-1 p-0 overflow-hidden",children:(0,s.jsx)(Y,{className:"h-full p-6",ref:o,children:(0,s.jsx)("div",{className:"space-y-4",children:t.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-end gap-2 animate-in fade-in ".concat("me"===e.sender?"justify-end":"justify-start"),children:["peer"===e.sender&&(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-accent flex-shrink-0","aria-label":"Peer avatar"}),(0,s.jsxs)("div",{className:"max-w-[75%] p-3 rounded-lg shadow-sm ".concat("me"===e.sender?"bg-primary text-primary-foreground":"bg-muted"),children:[(0,s.jsx)("p",{className:"text-sm break-words",children:e.text}),(0,s.jsx)("p",{className:"text-xs opacity-70 mt-1 text-right",children:e.timestamp})]})]},t))})})}),(0,s.jsx)(N,{className:"pt-4 border-t",children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),c()},className:"flex w-full items-center space-x-2",children:[(0,s.jsx)(G,{value:i,onChange:e=>l(e.target.value),placeholder:"Type a message...",autoComplete:"off","aria-label":"Message input",disabled:"connected"!==a}),(0,s.jsx)(p,{type:"submit",size:"icon",disabled:"connected"!==a||!i.trim(),"aria-label":"Send message",children:(0,s.jsx)(K.A,{className:"h-4 w-4"})})]})})]})}function Z(e){let{onScan:t,onBack:a}=e,{toast:n}=(0,r.dj)();return(0,s.jsxs)(h,{children:[(0,s.jsxs)(g,{children:[(0,s.jsx)(j,{children:"Scan QR Code"}),(0,s.jsx)(v,{children:"Scan the QR code from your friend to join the chat."})]}),(0,s.jsx)(b,{children:(0,s.jsx)(J.Lp,{onScan:e=>{e&&e.length>0&&e[0].rawValue?t(e[0].rawValue):n({title:"Scan Error",description:"Could not read QR code. The format is invalid.",variant:"destructive"})},onError:e=>{console.log(null==e?void 0:e.message),n({title:"Scan Error",description:"Could not scan QR code. Please try again.",variant:"destructive"})}})}),(0,s.jsx)(N,{children:(0,s.jsxs)(p,{variant:"outline",onClick:a,className:"w-full",children:[(0,s.jsx)(Q.A,{className:"mr-2 h-4 w-4"})," Back"]})})]})}function ee(){let{toast:e}=(0,r.dj)(),t=function(){let[e,t]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{t(!0)},[]),e}(),[a,i]=(0,n.useState)("home"),{messages:u,connectionStatus:f,offer:x,answer:m,pastedInfo:p,setPastedInfo:N,createSession:w,joinSession:C,completeJoin:A,sendMessage:k,cleanup:R}=function(){let{onConnectionStateChange:e,onChatting:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{toast:a}=(0,r.dj)(),[s,i]=(0,n.useState)([]),[u,f]=(0,n.useState)("disconnected"),[x,m]=(0,n.useState)(""),[p,h]=(0,n.useState)(""),[g,j]=(0,n.useState)(""),v=(0,n.useRef)(null),b=(0,n.useRef)(null),N=(0,n.useCallback)(()=>{var e,t;null==(e=v.current)||e.close(),v.current=null,null==(t=b.current)||t.close(),b.current=null,i([]),f("disconnected"),m(""),h(""),j("")},[]),y=(0,n.useCallback)(()=>{if(v.current){let t=v.current.connectionState;f(t),null==e||e(t)}},[e]),w=(0,n.useCallback)(a=>{b.current=a,a.onopen=()=>{f("connected"),null==e||e("connected"),null==t||t()},a.onclose=N,a.onmessage=e=>{let t=JSON.parse(e.data);i(e=>[...e,t])}},[N,t,e]),C=(0,n.useCallback)(()=>{let e=new RTCPeerConnection(d);return v.current=e,e.onconnectionstatechange=y,e},[y]),S=(0,n.useCallback)(async()=>{f("connecting");let e=C();w(e.createDataChannel("chat"));let t=[];e.onicecandidate=e=>{e.candidate&&t.push({candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid,sdpMLineIndex:e.candidate.sdpMLineIndex})};let a=await e.createOffer();await e.setLocalDescription(a),await new Promise(a=>{let s=setInterval(()=>{"complete"===e.iceGatheringState&&(clearInterval(s),m(l(JSON.stringify({sdp:e.localDescription,candidates:t}))),a())},100)})},[C,w]),A=(0,n.useCallback)(async()=>{if(!g)return void a({title:"Error",description:"Please paste or scan the session info.",variant:"destructive"});try{let e=g;c(e)||(e=o(g));let t=JSON.parse(e);if(!t.sdp||!t.candidates)throw Error("Invalid session info");f("connecting");let a=C();a.ondatachannel=e=>w(e.channel);let s=[];a.onicecandidate=e=>{e.candidate&&s.push({candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid,sdpMLineIndex:e.candidate.sdpMLineIndex})},await a.setRemoteDescription(new RTCSessionDescription(t.sdp)),t.candidates.forEach(e=>a.addIceCandidate(new RTCIceCandidate(e)));let n=await a.createAnswer();await a.setLocalDescription(n),await new Promise(e=>{let t=setInterval(()=>{if("complete"===a.iceGatheringState){clearInterval(t);let n={sdp:a.localDescription,candidates:s};h(l(JSON.stringify(n))),e()}},100)})}catch(e){console.error(e),a({title:"Error",description:"Invalid session info provided.",variant:"destructive"}),j("")}},[g,C,w,a]),k=(0,n.useCallback)(async()=>{if(g&&v.current)try{let e=g;c(e)||(e=o(g));let t=JSON.parse(e);if(!t.sdp||!t.candidates)throw Error("Invalid session info");await v.current.setRemoteDescription(new RTCSessionDescription(t.sdp)),t.candidates.forEach(e=>{var t;return null==(t=v.current)?void 0:t.addIceCandidate(new RTCIceCandidate(e))})}catch(e){a({title:"Error",description:"Invalid answer info provided.",variant:"destructive"}),j("")}},[g,a]);return{messages:s,connectionStatus:u,offer:x,answer:p,pastedInfo:g,setPastedInfo:j,createSession:S,joinSession:A,completeJoin:k,sendMessage:e=>{if(""===e.trim()||!b.current||"open"!==b.current.readyState)return e;let t={text:e,sender:"peer",timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};b.current.send(JSON.stringify(t));let a={text:e,sender:"me",timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};return i(e=>[...e,a]),""},cleanup:N}}({onConnectionStateChange:t=>{"connected"===t?i("chatting"):("disconnected"===t||"failed"===t)&&(I(),e({title:"Connection Lost",description:"The connection with your peer has been lost.",variant:"destructive"}))},onChatting:()=>i("chatting")}),I=()=>{R(),i("home")},E=async()=>{i("creating"),await w()},O=async()=>{await C()};if(!t)return(0,s.jsxs)(h,{children:[(0,s.jsx)(g,{children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-3 rounded-lg bg-primary/20 text-primary",children:(0,s.jsx)(y.A,{className:"w-8 h-8"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(j,{className:"text-2xl font-bold",children:"AirLink"}),(0,s.jsx)(v,{children:"Ad-hoc, direct & private chat."})]})]})}),(0,s.jsx)(b,{className:"space-y-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-muted-foreground pt-4",children:[(0,s.jsx)(T.A,{className:"animate-spin h-5 w-5"}),(0,s.jsx)("span",{children:"Loading..."})]})})]});switch(a){case"creating":return(0,s.jsx)(V,{offer:x,pastedInfo:p,setPastedInfo:N,onCompleteJoin:A,onCancel:I});case"joining":return(0,s.jsx)(F,{answer:m,pastedInfo:p,setPastedInfo:N,onJoin:O,connectionStatus:f,onBack:I});case"scanning":return(0,s.jsx)(Z,{onScan:e=>{N(e),i("joining")},onBack:()=>i("home")});case"chatting":return(0,s.jsx)(W,{messages:u,connectionStatus:f,onSendMessage:k});default:return(0,s.jsx)(S,{onCreateSession:E,onJoin:()=>i("joining"),onScan:()=>i("scanning")})}}},7481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>f});var s=a(2115);let n=0,r=new Map,i=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],c={toasts:[]};function d(e){c=l(c,e),o.forEach(e=>{e(c)})}function u(e){let{...t}=e,a=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:a});return d({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function f(){let[e,t]=s.useState(c);return s.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},9434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>r});var s=a(2596),n=a(9688);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,s.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[33,802,434,441,684,358],()=>t(3530)),_N_E=e.O()}]);